<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced JavaScript Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Advanced JavaScript Example</h1>
    <button id="fetchDataBtn">Fetch Data</button>
    <p id="output"></p>

    <script>
        // ==== Closures ====
        function createCounter() {
            let count = 0;
            return function () {
                count++;
                return count;
            };
        }
        const counter = createCounter();
        console.log('Closure Counter:', counter()); // Output: 1
        console.log('Closure Counter:', counter()); // Output: 2

        // ==== Promises and Async/Await ====
        const fetchData = async () => {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        };

        // ==== Prototypes and Inheritance ====
        function Person(name) {
            this.name = name;
        }
        Person.prototype.greet = function () {
            return `Hello, my name is ${this.name}`;
        };

        function Student(name, major) {
            Person.call(this, name);
            this.major = major;
        }
        Student.prototype = Object.create(Person.prototype);
        Student.prototype.constructor = Student;

        const student = new Student('Alice', 'Computer Science');
        console.log('Prototype Inheritance:', student.greet()); // Output: "Hello, my name is Alice"

        // ==== Event Listener ====
        document.getElementById('fetchDataBtn').addEventListener('click', async () => {
            const outputElement = document.getElementById('output');
            outputElement.textContent = 'Fetching data...';

            const data = await fetchData();
            outputElement.textContent = `Fetched Data: ${JSON.stringify(data)}`;
        });

        // ==== Destructuring ====
        const person = { name: 'Bob', age: 30 };
        const { name, age } = person;
        console.log('Destructuring:', name, age); // Output: "Bob" 30

        // ==== Higher-Order Functions ====
        const numbers = [1, 2, 3, 4, 5];
        const doubled = numbers.map((num) => num * 2);
        console.log('Higher-Order Function (Map):', doubled); // Output: [2, 4, 6, 8, 10]

        // ==== Error Handling ====
        try {
            throw new Error('This is a custom error!');
        } catch (error) {
            console.error('Error Handling:', error.message); // Output: "This is a custom error!"
        }
    </script>
</body>
</html>
